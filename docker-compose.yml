services:
  claude:
    image: ungb/claude-code:latest
    build: .
    container_name: claude-code
    volumes:
      # Mount your project directory (or use ./workspace)
      - .:/workspace
      # Share your host's Claude config (commands, agents, settings, OAuth tokens)
      - ~/.claude:/home/coder/.claude
      # SSH keys for git operations (read-only)
      - ~/.ssh:/home/coder/.ssh:ro
      # Git configuration (read-only)
      - ~/.gitconfig:/home/coder/.gitconfig:ro
      # Dedicated folder for screenshots and images (recommended)
      - ~/claude-screenshots:/screenshots
    environment:
      # Set your Anthropic API key (not needed if using OAuth)
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
    stdin_open: true
    tty: true
    working_dir: /workspace
    # Uncomment for OAuth login or MCP servers
    # network_mode: host

  # Alternative: Use named volume instead of host mount
  # Useful if you don't have existing ~/.claude config
  claude-fresh:
    image: ungb/claude-code:latest
    build: .
    container_name: claude-code-fresh
    volumes:
      - .:/workspace
      - claude-config:/home/coder/.claude
      - ~/.ssh:/home/coder/.ssh:ro
      - ~/.gitconfig:/home/coder/.gitconfig:ro
      - ~/claude-screenshots:/screenshots
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
    stdin_open: true
    tty: true
    working_dir: /workspace
    profiles:
      - fresh

volumes:
  claude-config:
    name: claude-code-config
